# コード整形

私はコード整形には「[XO](https://github.com/xojs/xo)」をお勧めしています。

コード整形で一番有名なのは「[prettier](https://prettier.io)」ですが、こちらはユーザー毎に色々設定できてしまうため無駄にGit差分が出てしまうことがあります。

XOは有用なESLint設定をいい感じに詰め合わせてくれており、とりあえずインストールしてデフォルトのまま使用できます。更に、ESLintでのコード整形なので prettier ではしてくれない **「foreachを自動でforに書き直す」** ようなこともサポートしてくれます。

## XOのインストール

```bash
npm i -D xo
```

## VSCode拡張

XOをインストールしたら追加で、VSCode拡張の「[XO](https://marketplace.visualstudio.com/items?itemName=samverschueren.linter-xo)」もインストールすると保存時に自動整形してくれます。

## XOの注意点

packagejson に以下の設定だけは入れておいた方が良いです。

```json
{
  "xo": {
    "rules": {
      "capitalized-comments": "off"
    }
  }
}
```

「capitalized-commentsルール」は「コメントの先頭は常に大文字にしましょう」というルールなのですが、ちょっとコードをコメントアウトした時にまで先頭を大文字にしてしまうので、例えば

```js
const foo = 1;

↓ Comment Out

// Const foo = 1;

↓ Comment In

Const foo = 1; // <-- Error
```

このように、次にコメントインした際に動作しなくなってしまうコードに整形されてしまいますので必ず off にしておきましょう。
